<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <title>Shopping Website</title>
</head>
<body>

<div>
  <div class="row mb-3">
    <div class="col-md-12 filter-container">
      <h3 style="text-align: center; border: 2px solid #817f7f; padding: 10px; background-color:rgb(74, 74, 77);color: rgb(246, 249, 252);">FEEL FREE TO SHOP</h3><br>
      <!-- <input type="text" class="form-control-center" id="searchLetter" placeholder="Search..." style="border:2px solid rgb(63, 62, 62)" name= "search">
      
          <button class="btn btn-primary ml-2" type="button"   id="Searching" onclick="searchAndDisplayData()"  >Search</button>
          <div id="searchResult"></div> -->
      <a href="/products" class="btn btn-primary ml-2" style="text-align: center;position: absolute;right: 10px;top:12vh">View All Products</a><br>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <table class="table table-bordered table-hover">
        <thead class="thead-light dark">
          <tr>
            <th>S.NO</th>
            <th>NAME</th>
            <th>PRODUCT COUNT</th>
            <th>CREATED DATE</th>
          </tr>
        </thead>
        <tbody id="tBody">
          
        </tbody>
      </table>
    </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script>



  function generateCategoryLinks(categories) {
    const categoryTableBody = document.getElementById('tBody');

    categories.forEach(category => {
      const row = `<tr>
                    <td>${category.CD_ID}</td>
                    <td><a href="#" onclick="fetchProducts(${category.CD_ID})">${category.NAME}</a></td>
                    <td>${category.PRODUCT_COUNT}</td>
                    <td>${category.CREATED_DATE}</td>
                  </tr>`;
      categoryTableBody.innerHTML += row;
    });
  }

  function fetchProducts(categoryId) {
 
  window.location.href = `/product-list.html?categoryId=${categoryId}&page=1#`;
}
  
  fetch('/category') 
    .then(response => response.json())
    .then(results => {
      generateCategoryLinks(results);
    });

// function searchAndDisplayData(){
//   let searchLetter=document.getElementById(searchLetter).value;
  
// }



</script>

<style>
  .table {
    border: 2px solid rgb(165, 161, 161);
  }
  .container {
    margin-left: 0px;
    margin-right: 0px;
  }
  .row {
    margin-left: 0px;
    margin-right: 0px;
  }
  .table {
    text-align: center;
  }
</style>

</body>
</html>
